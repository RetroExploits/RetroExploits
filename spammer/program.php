<?php
// CONFIG - edit  !! tested only with Uber and Rev !! no captchas plz !!
$formData = array("username" => "reg_username", "password" => "reg_password", "password2" => "reg_rep_password", "email" => "reg_email", "tos" => "accept"); // form data, tos not needed (should work without modification), register parameter automatically always sended
$proxyList = "proxylist.txt"; // proxy list in txt
$uaList = "useragents.txt"; // user agent list in txt
$maxUsers = 100; // how many users will be generated
$registerSubmitUrl = "http://swifthotelli.pw/register"; // url when register is submitted (form action="(url)"), if (url) is empty url is current url
// DO NOT TOUCH!
function generateRandomString($length = 10) {
    $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $charactersLength = strlen($characters);
    $randomString = '';
    for ($i = 0; $i < $length; $i++) {
        $randomString .= $characters[rand(0, $charactersLength - 1)];
    }
    return $randomString;
}
$totalS = 0;
$totalU = 0;
echo "\033[1m[i] Starting account generator.\033[0m\n";
if(file_exists($proxyList)) {
    echo "[i] Loaded \033[1m" . substr_count(file_get_contents($proxyList), PHP_EOL) . "\033[0m proxies\n";
} else {
    echo "\033[31m[!] ERROR! Proxylist not found\033[0m\n";
    exit;
}
if(file_exists($uaList)) {
    echo "[i] Loaded \033[1m" . substr_count(file_get_contents($uaList), PHP_EOL) . "\033[0m user agents\n";
} else {
    echo "\033[31m[!] ERROR! User agent list not found\033[0m\n";
    exit;
}
echo "[i] Preparing to generate \033[1m" . $maxUsers . "\033[0m dummy accounts\n"; 
echo "[i] Starting generating...\n";
for($i = 0; $i <= $maxUsers; $i++) {
    $f_contents = file($proxyList);
    $line = $f_contents[array_rand($f_contents)];
    $rand_username = generateRandomString();
    $rand_password = generateRandomString();
    $rand_email = generateRandomString() . "@" . generateRandomString() . ".com";
    $ch = curl_init();
    $uas = explode(PHP_EOL, file_get_contents($uaList));
    $rand_ua = $uas[rand(0,(count($uas)-1))];
    curl_setopt($ch, CURLOPT_USERAGENT, $rand_ua);
    curl_setopt($ch, CURLOPT_TIMEOUT, 10);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FAILONERROR, 1);
    curl_setopt($ch, CURLOPT_ENCODING, "");
    curl_setopt($ch, CURLOPT_COOKIESESSION, 1);
    curl_setopt($ch, CURLOPT_PROXY, $line);
    curl_setopt($ch, CURLOPT_COOKIEJAR, "/dev/null");
    curl_setopt($ch, CURLOPT_REFERER, "http://google.com");
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query(array($formData["username"] => $rand_username, $formData["password"] => $rand_password, $formData["password2"] => $rand_password, $formData["email"] => $rand_email, $formData["tos"] => "accept", "register" => "true")));
    curl_setopt($ch, CURLOPT_URL, $registerSubmitUrl);
    $tmp = curl_exec($ch);
    curl_close($ch);
    if(strpos($tmp, 'Document Moved') !== false) {
        echo "\033[1m{$i}/{$maxUsers}\033[0m [i] Generated new user; Username: " . $rand_username . ", Password: " . $rand_password . ", Email: " . $rand_email . " with proxy address: ".str_replace(array("\n", "\r", PHP_EOL), array("", "", ""), $line)." and user agent: ".$rand_ua."\n";
        $totalS++;
    } else {
        echo "\033[1m{$i}/{$maxUsers}\033[0m [!] Tried to generate new user with proxy: " .str_replace(array("\n", "\r", PHP_EOL), array("", "", ""), $line).", but failed.\n";
        $totalU++;
    }
    if($i == $maxUsers) {
        echo "[i] Generated " . $i . " users! Successful: " . $totalS . ", Unsuccessful: " . $totalU . "\n";
    }
}
?>
